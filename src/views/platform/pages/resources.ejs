<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SG Platform</title>
    <link
      rel="shortcut icon"
      type="image/png"
      href="/platform/assets/images/logos/favicon.png"
    />
    <link rel="stylesheet" href="/platform/assets/css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
      rel="stylesheet"
    />
    <%-include("../partials/preloader-css")%>
  </head>
  <%-include("../partials/post-head")%>
  <style>
    .highlight {
            background-color: gold;
        }
    .container {
  padding: 10px;
}

ul li {
  list-style: none;
  
}
.badge{
  margin:8px 0;
}
.card-title{
  color : #5d87ff
}

.search-bar {
  width: 100%;
  padding: 14px;
  border-radius: 30px;
  font-size: 14px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  transition: box-shadow 0.3s ease-in-out;
}

.search-bar:focus {
  outline: none;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  border-color: #5d87ff; /* Change the border color on focus */

}

/* Style the placeholder text */
.search-bar::placeholder {
  color: #888; /* Adjust the color to your preference */
  transition: font-size 0.3s ease-out;
}

/* Move the placeholder text on focus */
.search-bar:focus::placeholder {
  font-size: 12px; /* Adjust the font size when moved to the top */
}

  </style>
  <body>
    <%-include("../partials/preloader")%>
    <!--  Body Wrapper -->
    <div
      class="page-wrapper"
      id="main-wrapper"
      data-layout="vertical"
      data-navbarbg="skin6"
      data-sidebartype="full"
      data-sidebar-position="fixed"
      data-header-position="fixed"
    >
      <%-include("../partials/sidebar")%>
      <!--  Main wrapper -->
      <div class="body-wrapper">
        <%-include("../partials/header")%>
        <div class="container-fluid">
          <div class="container">
            <div class="row">
              <div class="col-sm-12 mb-3">
                <input type="text" id="myFilter" class="form-control search-bar" onkeyup="myFunction()" placeholder="Search here..">
              </div>
            </div>
            <div class="row" id="myItems">
              <div class="col-sm-12 mb-3">
                <%for(var i=0;i<cards.length;i++){%>
                  <div class="card" style="margin-bottom: 16px;"> <!-- Updated margin-bottom to 16px -->
                    <div class="card-body">
                      <%if(cards[i].attributes && cards[i].attributes.title){%>
                      <h5 class="card-title"><%=cards[i].attributes.title%></h5> <!-- Removed anchor tag -->
                      <%}%>
                      <%if(cards[i].attributes && cards[i].attributes.tags){%>
                      <span class="badge bg-primary"><%=cards[i].attributes.tags%></span> <!-- Replaced Tags with Subtitle -->
                      <%}%>
                      <%if(cards[i].attributes && cards[i].attributes.content){%>
                      <p class="card-text"><%-cards[i].attributes.content-%></p>
                      <%}%>
                    </div>
                  </div>
                <%}%>    
              </div>    
            </div>
          </div>
        </div>
      </div>
    <script src="/platform/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/platform/assets/js/sidebarmenu.js"></script>
    <script src="/platform/assets/js/app.min.js"></script>
    <script src="/platform/assets/libs/apexcharts/dist/apexcharts.min.js"></script>
    <script src="/platform/assets/libs/simplebar/dist/simplebar.js"></script>
    <script src="/platform/assets/js/dashboard.js"></script>
    <script src="/platform/assets/js/theme.js"></script>
    <%-include("../partials/preloader-js")%>
  </body>
  <script>
function myFunction() {
  input = document.getElementById("myFilter");
filter = input.value.toUpperCase();
cardContainer = document.getElementById("myItems");
cards = cardContainer.getElementsByClassName("card");

for (let i = 0; i < cards.length; i++) {
    let card = cards[i];
    let textContent = card.innerText || card.textContent;
    
    // Remove existing highlights
    removeHighlight(card);

    if (textContent.toUpperCase().indexOf(filter) > -1) {
        card.style.display = "";
        highlightText(card, filter);
    } else {
        card.style.display = "none";
    }
}

function removeHighlight(card) {
    let spans = card.querySelectorAll("span.highlight");
    spans.forEach(span => {
        span.outerHTML = span.innerText; // Remove the span but keep its content
    });
}

function highlightText(card, filter) {
    let elements = card.querySelectorAll("*");
    elements.forEach(element => {
        if (element.children.length === 0) {
            let text = element.textContent;
            let regex = new RegExp(filter, "gi");
            let newText = text.replace(regex, (match) => `<span class='highlight'>${match}</span>`);
            element.innerHTML = newText;
        }
    });
}


}

  </script>
</html>
